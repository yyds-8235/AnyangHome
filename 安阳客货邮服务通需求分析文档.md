# "安阳客货邮服务通"微信小程序需求分析文档 (V1.0)

## 1. 项目概述

"安阳客货邮服务通"微信小程序，致力于为安阳市民及关注安阳发展的用户提供权威、及时的政策资讯服务。通过整合安阳市的各类政策新闻，特别聚焦于助农产品推广和本地特色产业扶持，打造一个便捷的信息查询平台，助力本地经济发展和农产品推广。小程序侧重于政策宣传与信息服务，辅助PC端线上商城推广，帮助用户更好地了解相关扶持政策和发展动态。

## 2. 目标用户

- 安阳市本地居民
- 对助农产品感兴趣的消费者
- 关注安阳市政策、文化、旅游、特产的用户
- PC端线上商城的潜在客户

## 3. 功能需求分析

### 3.1. 个人中心 
此模块为用户提供基础的账户管理功能，是用户参与小程序互动的基础。

- **登录/注册**：采用"用户名+密码"的自建账户体系。

- **获取/修改个人信息**：用户可以设置头像、昵称、简介等。

- **修改密码**：为基于"用户名+密码"体系的用户提供密码修改功能。

- **注销账户**：提供用户注销账户的选项，保障用户数据权利。

- 1.1 用户认证

  - `POST /api/auth/login` - 用户登录
  - `POST /api/auth/user/register` - 用户注册
  - `POST /api/auth/logout` - 用户登出

  ### 1.2 用户信息管理

  - `GET /api/user/profile` - 获取当前用户信息
  - `PUT /api/user/profile` - 更新用户信息
  - `PUT /api/user/password` - 修改密码
  - `DELETE /api/user/account` - 注销账户

  用户表：id
  username
  password
  avatar
  gender
  date_of_birth
  create_time
  update_time

### 3.2. 助农政策 (Agricultural Policy)
此模块定位为官方、权威的助农政策发布渠道，专门推广与农产品相关的扶持政策。

- **功能细化**：
  1. **政策列表**：以列表形式展示助农政策新闻，每项应包含：`标题`、`发布单位`、`发布日期`、`摘要`。
  2. **政策详情**：点击列表项进入详情页，展示完整的政策内容（富文本格式，支持图文混排）。
  3. **分类筛选**：建议增加政策分类，如"农产品扶持"、"农业补贴"、"农村电商"、"乡村振兴"等，方便用户快速查找。
  4. **下拉刷新与上拉加载**：提供流畅的列表浏览体验。
  5. **(可选) 搜索功能**：允许用户根据关键词搜索相关政策。

- **UI/UX 建议**：
  - **风格**：界面设计应简洁、严肃、权威，主色调可采用绿色系（代表农业）。
  - **排版**：字体清晰，段落分明，重点内容可加粗显示，提升阅读体验。

### 3.3. 助农资讯 (Agricultural News)
此模块定位为生动、及时的本地农业发展动态窗口，重点推广助农产品相关信息。

- **功能细化**：
  1. **资讯列表**：采用卡片式图文列表，每项应包含：`标题`、`缩略图`、`来源`、`发布时间`、`阅读量`。
  2. **资讯详情**：展示完整新闻内容（富文本），底部可包含`点赞`和`分享`功能。
  3. **轮播图 (Banner)**：在列表顶部设置轮播图，推荐头条或热点助农资讯。
  4. **分类切换**：提供不同资讯频道，如"助农要闻"、"农产品动态"、"农业科技"、"乡村振兴"等。
  5. **(可选) 热门排行**：根据阅读量或点赞数展示热门资讯榜单。

- **UI/UX 建议**：
  - **风格**：设计应更具活力，图文并茂，突出农业特色，吸引用户点击阅读。
  - **布局**：卡片式布局能有效承载图片和文字信息，提升视觉美感。

### 3.4. 助农产品 (Agricultural Products)
此模块是展示安阳本地助农产品的窗口，旨在宣传推广，并为PC端线上商城引流。

- **功能细化**：
  1. **产品列表**：以精美的栅格或卡片列表展示助农产品，每项包含：`产品图片`、`产品名称`、`简短描述`、`产地信息`。
  2. **产品详情**：点击进入详情页，展示：
     - 高清产品图集（轮播）。
     - 详细的产品介绍、产地故事、营养价值、种植过程。
     - 一个醒目的"复制链接"按钮。
  3. **复制链接功能**：
     - 用户点击按钮后，调用 `wx.setClipboardData` 接口将 PC 端线上商城链接复制到用户剪贴板。
     - 复制成功后，必须有明确的提示，例如 `wx.showToast({ title: '链接已复制' })`。
     - 在按钮下方或旁边提供清晰的文字引导，如："链接已复制，请打开手机浏览器粘贴访问购买"。

- **UI/UX 建议**：
  - **风格**：设计应突出"助农"和"绿色"的质感，精美、有吸引力。使用高质量、有食欲或美感的农产品图片。
  - **交互**：复制链接的操作要非常简单、直观。

## 4. 接口 (API) 设计

### 4.1. 基础设定
- **根路径 (Base URL)**：`https://your-api-domain.com/api/v1`
- **认证方式**：部分接口（如修改个人信息）需要在请求头中携带 `Authorization: <token>`，该 `token` 在用户登录时获取。公开信息的接口无需认证。
- **数据格式**：所有请求和响应主体均为 `JSON` 格式。
- **通用响应结构**：
```typescript
interface ApiResponse<T> {
  code: number; // 状态码, 0 表示成功, 其他表示失败
  message: string; // 提示信息
  data: T | null; // 响应数据
}
```

### 4.2. 个人中心接口 (已完成)
- `POST api/auth/login` - 登录
- `POST api/auth/register` - 注册
- `POST api/auth/logout` - 登出
- `GET api/user/profile` - 获取当前用户信息
- `PUT api/user/profile` - 更新用户信息
- `PUT /user/password` - 修改密码
- `DELETE /user/account` - 注销账户

### 4.3. 助农政策接口 (需要开发)
- **获取政策分类列表**
  - **Endpoint**: `GET /policies/categories`
  - **认证**: 否
  - **响应 `data`**:
    ```typescript
    Array<{
      id: number;
      name: string; // e.g., "农产品扶持"
    }>
    ```

- **获取政策列表**
  - **Endpoint**: `GET /policies`
  - **认证**: 否
  - **请求参数 (Query)**:
    - `page: number` (页码, e.g., 1)
    - `pageSize: number` (每页数量, e.g., 10)
    - `categoryId?: number` (可选的分类ID)
  - **响应 `data`**:
    ```typescript
    {
      list: Array<{
        id: number;
        title: string;
        source: string; // 发布单位
        publishDate: string; // ISO 8601 format
        summary: string;
      }>,
      total: number;
    }
    ```

- **获取政策详情**
  - **Endpoint**: `GET /policies/{id}`
  - **认证**: 否
  - **路径参数**: `id: number` (政策ID)
  - **响应 `data`**:
    ```typescript
    {
      id: number;
      title: string;
      source: string;
      publishDate: string;
      content: string; // HTML 或 Markdown 格式的富文本内容
    }
    ```

### 4.4. 助农资讯接口 (需要开发)
- **获取资讯轮播图**
  - **Endpoint**: `GET /news/banners`
  - **认证**: 否
  - **响应 `data`**:
    ```typescript
    Array<{
      id: number;
      imageUrl: string;
      targetUrl: string; // 点击后跳转的文章ID
    }>
    ```

- **获取资讯列表**
  - **Endpoint**: `GET /news`
  - **认证**: 否
  - **请求参数 (Query)**:
    - `page: number`
    - `pageSize: number`
    - `category?: string` (e.g., "agricultural", "policy")
  - **响应 `data`**:
    ```typescript
    {
      list: Array<{
        id: number;
        title: string;
        thumbnail: string; // 缩略图 URL
        source: string;
        publishDate: string;
        viewCount: number;
      }>,
      total: number;
    }
    ```

- **获取资讯详情**
  - **Endpoint**: `GET /news/{id}`
  - **认证**: 否
  - **路径参数**: `id: number` (资讯ID)
  - **响应 `data`**:
    ```typescript
    {
      id: number;
      title: string;
      source: string;
      publishDate: string;
      content: string; // 富文本内容
      viewCount: number;
      likeCount: number;
    }
    ```

### 4.5. 助农产品接口 (需要开发)
- **获取产品列表**
  - **Endpoint**: `GET /products`
  - **认证**: 否
  - **请求参数 (Query)**:
    - `page: number`
    - `pageSize: number`
  - **响应 `data`**:
    ```typescript
    {
      list: Array<{
        id: number;
        name: string;
        imageUrl: string;
        description: string;
        origin: string; // 产地信息
      }>,
      total: number;
    }
    ```

- **获取产品详情**
  - **Endpoint**: `GET /products/{id}`
  - **认证**: 否
  - **路径参数**: `id: number` (产品ID)
  - **响应 `data`**:
    ```typescript
    {
      id: number;
      name: string;
      images: string[]; // 产品图集
      fullDescription: string; // 详细介绍 (富文本)
      origin: string; // 产地信息
      nutritionInfo: string; // 营养价值
      plantingProcess: string; // 种植过程
      ecommerceLink: string; // PC端商城链接
    }
    ```

## 5. 技术选型与实施建议

- **前端**：
  - **语言**: **TypeScript**
  - **UI 框架**: 建议使用成熟的微信小程序 UI 组件库，如：
    - **TDesign WeMini**: 腾讯出品，设计现代，组件齐全。
    - **Vant Weapp**: 轻量、可靠，社区活跃，上手简单。
    - **WeUI**: 官方组件库，与微信原生体验最一致。
  - **状态管理**: 对于中小型项目，小程序的原生数据管理足够。
  - **代码组织**: 建议使用 `Miniprogram TS Starter` 等脚手架来搭建项目。

- **样式美观建议**：
  1. **统一设计规范**：定义统一的`主色`、`辅助色`、`字体大小`、`间距`，并应用到所有页面。
  2. **高质量图片**：所有资讯、产品的图片都应清晰、美观，进行适当压缩以优化加载速度。
  3. **增加加载动画**：在请求数据时显示骨架屏 (Skeleton) 或加载动画，提升用户体验。
  4. **图标统一**: 使用同一套图标库（如 Iconfont）来保证视觉风格的一致性。
  5. **反馈及时**: 用户的任何操作（点击、复制等）都应该有及时的视觉反馈（如 Toast 提示、按钮状态变化）。
